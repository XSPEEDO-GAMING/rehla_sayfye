<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠÙÙŠØ©</title>
    <link rel="stylesheet" href="style_home.css">
</head>
<body>
    <!-- ÙÙŠØ¯ÙŠÙˆ Ø®Ù„ÙÙŠØ© Ù„Ø¹ØµØ§ÙÙŠØ± ØªØ·ÙŠØ± ÙÙˆÙ‚ Ø§Ù„Ø¨Ø­Ø± Ù…Ø¹ ØµÙˆØª -->
    <video id="bg-video" autoplay loop muted playsinline style="position:fixed;top:0;left:0;width:100vw;height:100vh;object-fit:cover;z-index:-1;">
        <source src="https://cdn.pixabay.com/video/2023/03/14/157234-810015382_large.mp4" type="video/mp4">
        Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
    </video>
    <audio id="birds-audio" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfae5e2.mp3" autoplay loop></audio>

    <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© -->
    <div id="coins-counter" style="position:fixed;top:20px;left:20px;z-index:1000;background:#fffbe7;border-radius:20px;padding:8px 18px;box-shadow:0 2px 8px #0002;display:flex;align-items:center;font-weight:bold;font-size:1.1em;">
        <img src="https://cdn-icons-png.flaticon.com/512/138/138292.png" alt="ÙƒÙˆÙŠÙ†Ø²" style="width:28px;height:28px;margin-left:8px;">
        <span id="coins-value">0</span> ÙƒÙˆÙŠÙ†Ø²
    </div>

    <!-- Ø²Ø± Ø´Ø±Ø§Ø¡ ÙƒÙˆÙŠÙ†Ø² -->
    <div id="buy-coins-btn" 
         onclick="window.location.href='cio.html'"
         style="position:fixed;top:20px;right:20px;z-index:1001;cursor:pointer;background:#fffbe7;border-radius:50%;box-shadow:0 2px 8px #0002;width:48px;height:48px;display:flex;align-items:center;justify-content:center;transition:box-shadow 0.2s;">
        <img src="https://cdn-icons-png.flaticon.com/512/138/138292.png" alt="Ø´Ø±Ø§Ø¡ ÙƒÙˆÙŠÙ†Ø²" style="width:32px;height:32px;">
    </div>

    <div class="home-container">
        <img id="user-img" class="user-image" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="display:none;">
        <h2 id="welcome-msg">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠÙÙŠØ©</h2>
        <p>Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹.</p>
        <div class="info">
            <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h3>
            <ul>
                <li>Ø§Ù„ÙˆØ¬Ù‡Ø©: Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­</li>
                <li>Ø§Ù„ØªØ§Ø±ÙŠØ®: 3 ÙŠÙˆÙ„ÙŠÙˆ 2025</li>
                <li>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: 7 Ø£ÙŠØ§Ù…</li>
                <li>Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©: ÙÙ†Ø¯Ù‚ 5 Ù†Ø¬ÙˆÙ…</li>
                <li>Ø§Ù„Ø£Ù†Ø´Ø·Ø©: Ø³Ø¨Ø§Ø­Ø©ØŒ Ø£Ù„Ø¹Ø§Ø¨ Ø´Ø§Ø·Ø¦ÙŠØ©ØŒ Ø¬ÙˆÙ„Ø§Øª Ø³ÙŠØ§Ø­ÙŠØ©</li>
            </ul>
        </div>
        <div class="actions">
            <div style="margin-bottom: 10px; display: flex; justify-content: center; align-items: center; gap: 12px;">
                <label for="persons">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø§Ø¯:</label>
                <input type="number" id="persons" min="1" value="1" style="width:50px; border-radius:8px; border:1px solid #bbb; text-align:center;">
                <span id="coins-needed" style="color:#ff9800; font-weight:bold;">(10 ÙƒÙˆÙŠÙ†Ø²)</span>
                <span style="margin-right:10px;cursor:pointer;" title="Ø´Ø±Ø§Ø¡ ÙƒÙˆÙŠÙ†Ø²" onclick="window.location.href='cio.html'">
                    ğŸª™
                </span>
                <!-- Ø²Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ -->
                <button onclick="subscribeTrip()" style="background:#2196f3;color:#fff;border:none;border-radius:10px;padding:7px 18px;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #0002;">
                    Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©
                </button>
            </div>
            <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ­Øª Ø¨Ø¹Ø¶ ÙˆØ¨Ù†ÙØ³ Ø´ÙƒÙ„ Ø²Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ -->
            <div style="display:flex;flex-direction:column;gap:10px;">
                <button onclick="showBookingDetails()" style="background:#2196f3;color:#fff;border:none;border-radius:10px;padding:7px 18px;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #0002;">
                    ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²
                </button>
                <div style="display:flex;justify-content:center;">
                    <button onclick="showGallery()" style="background:#2196f3;color:#fff;border:none;border-radius:10px;padding:7px 18px;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #0002;display:flex;align-items:center;gap:8px;margin:0 auto;">
                        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=facearea&w=48&h=48&facepad=2&q=80" alt="Ø´Ø§Ø·Ø¦ Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­" style="width:36px;height:36px;border-radius:10px;object-fit:cover;">
                        <span>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="other-trips">
            <h3>Ø±Ø­Ù„Ø§Øª Ø£Ø®Ø±Ù‰ Ù…ØªØ§Ø­Ø©:</h3>
            <ul>
                <li>Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù‚ØµØ± ÙˆØ£Ø³ÙˆØ§Ù† - Ø£ØºØ³Ø·Ø³ 2025</li>
                <li>Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø´Ø±Ù… Ø§Ù„Ø´ÙŠØ® - Ø³Ø¨ØªÙ…Ø¨Ø± 2025</li>
                <li>Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„ØºØ±Ø¯Ù‚Ø© - Ø£ÙƒØªÙˆØ¨Ø± 2025</li>
            </ul>
        </div>
    </div>
    <div id="switch-accounts-btn" style="position:fixed;bottom:20px;left:20px;z-index:2000;">
        <button onclick="showAccountsSwitcher()" style="background:#fffbe7;color:#2196f3;border:none;border-radius:18px;padding:10px 28px;font-size:1.05em;cursor:pointer;box-shadow:0 2px 8px #0002;">
            ğŸ”„ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨
        </button>
    </div>
    <div id="web-others-btn" style="position:fixed;bottom:20px;right:20px;z-index:2000;">
        <button onclick="window.location.href='web_others.html'"
            style="background:#fffbe7;color:#2196f3;border:none;border-radius:18px;padding:10px 28px;font-size:1.05em;cursor:pointer;box-shadow:0 2px 8px #0002;">
            ğŸŒ Ù…ÙˆØ§Ù‚Ø¹ Ø£Ø®Ø±Ù‰ Ù…ÙÙŠØ¯Ø©
        </button>
    </div>
    <script>
    function showAccountsSwitcher() {
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        if (!users.length) {
            alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©.");
            return;
        }
        let html = `<div style="background:#fffbe7;padding:18px 12px;border-radius:18px;box-shadow:0 2px 12px #0003;max-width:95vw;max-height:90vh;overflow:auto;position:fixed;bottom:70px;left:50px;z-index=5000;">
            <div style="font-weight:bold;color:#2196f3;font-size:1.1em;margin-bottom:10px;text-align:center;">Ø§Ø®ØªØ± Ø­Ø³Ø§Ø¨ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
            <div style="display:flex;flex-direction:column;gap:10px;">`;
        users.forEach(u => {
            html += `<button onclick="switchToAccount('${u.username.replace(/'/g,"\\'")}')" style="background:#2196f3;color:#fff;border:none;border-radius:12px;padding:8px 18px;font-size:1em;cursor:pointer;margin-bottom:4px;">${u.username}</button>`;
        });
        html += `</div>
            <button onclick="this.parentNode.remove()" style="margin:18px auto 0 auto;display:block;background:#eee;color:#2196f3;border:none;border-radius:18px;padding:6px 24px;font-size:1em;cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>`;
        let old = document.getElementById('accounts-switcher-modal');
        if (old) old.remove();
        let modal = document.createElement('div');
        modal.id = 'accounts-switcher-modal';
        modal.style = "position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0005;z-index:4999;";
        modal.onclick = function(e){ if(e.target===modal) modal.remove(); };
        modal.innerHTML = html;
        document.body.appendChild(modal);
    }
    function switchToAccount(username) {
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        let user = users.find(u => u.username === username);
        if (user) {
            localStorage.setItem('currentUser', JSON.stringify(user));
            alert("ØªÙ… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¥Ù„Ù‰: " + username);
            location.reload();
        }
    }
    </script>

    <script>
        // Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØµÙˆØ±ØªÙ‡ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„Ø§Ù‹
        const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
        const img = document.getElementById('user-img');
        if (currentUser) {
            // ØªØ­ÙŠØ© Ù…ØªÙ†Ø§Ø³Ù‚Ø©: Ù…Ø±Ø­Ø¨Ø§Ù‹ [Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠÙÙŠØ©
            document.getElementById('welcome-msg').innerHTML =
                `Ù…Ø±Ø­Ø¨Ø§Ù‹ <span style="color:#2196f3;font-weight:bold;">${currentUser.username}</span> ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠÙÙŠØ©`;
            if (currentUser.image) {
                img.src = currentUser.image;
                img.style.display = 'block';
                img.style.cursor = "pointer";
                img.title = "Ø§Ø¶ØºØ· Ù„ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©";
                img.style.borderRadius = "50%"; // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨
                img.style.objectFit = "cover";  // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨

                // Ø²Ø± Ù…Ø³Ø­ Ø§Ù„ØµÙˆØ±Ø©
                let delBtn = document.createElement('button');
                delBtn.textContent = "Ù…Ø³Ø­ Ø§Ù„ØµÙˆØ±Ø©";
                delBtn.style.margin = "10px auto";
                delBtn.style.display = "block";
                delBtn.style.background = "#f44336";
                delBtn.style.color = "#fff";
                delBtn.style.border = "none";
                delBtn.style.borderRadius = "20px";
                delBtn.style.padding = "5px 15px";
                delBtn.style.cursor = "pointer";
                delBtn.onclick = function () {
                    // Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø³Ø­ØŒ Ø§Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    delete currentUser.image;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    // Ø­Ø¯Ø« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                    let users = JSON.parse(localStorage.getItem('users') || '[]');
                    let idx = users.findIndex(u => u.username === currentUser.username);
                    if (idx !== -1) {
                        delete users[idx].image;
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                    img.style.display = 'none';
                    delBtn.remove();
                    showInitialsAvatar();
                };
                img.parentNode.insertBefore(delBtn, img.nextSibling);

                // ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
                img.onclick = function () {
                    let fileInput = document.createElement('input');
                    fileInput.type = 'file';
                    fileInput.accept = 'image/*';
                    fileInput.style.display = 'none';
                    document.body.appendChild(fileInput);
                    fileInput.onchange = function () {
                        const file = fileInput.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function (event) {
                                img.src = event.target.result;
                                img.style.borderRadius = "50%"; // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨
                                img.style.objectFit = "cover";  // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨
                                currentUser.image = event.target.result;
                                let users = JSON.parse(localStorage.getItem('users') || '[]');
                                let idx = users.findIndex(u => u.username === currentUser.username);
                                if (idx !== -1) {
                                    users[idx].image = event.target.result;
                                    localStorage.setItem('users', JSON.stringify(users));
                                }
                                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                            };
                            reader.readAsDataURL(file);
                        }
                        fileInput.remove();
                    };
                    fileInput.click();
                };
            } else {
                img.style.display = 'none';
                showInitialsAvatar();
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø¯Ø§Ø¦Ø±Ø© Ù…Ù„ÙˆÙ†Ø© ÙÙŠÙ‡Ø§ Ø£ÙˆØ§Ø¦Ù„ Ø­Ø±ÙˆÙ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ø²Ø± Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©
        function showInitialsAvatar() {
            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¯Ø§Ø¦Ø±Ø© Ø£Ùˆ Ø²Ø± Ø³Ø§Ø¨Ù‚
            let oldAvatar = document.getElementById('initials-avatar');
            if (oldAvatar) oldAvatar.remove();
            let oldAdd = document.getElementById('add-img-btn');
            if (oldAdd) oldAdd.remove();

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø­Ø±ÙˆÙ
            let initials = (currentUser.username || '').split(' ').map(w => w[0]).join('').slice(0,2).toUpperCase();
            let colors = [
                "#f44336", "#e91e63", "#9c27b0", "#3f51b5", "#2196f3", "#009688", "#4caf50", "#ff9800", "#795548"
            ];
            // Ù„ÙˆÙ† Ø«Ø§Ø¨Øª Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ø³Ù…Ù‡
            let color = colors[(currentUser.username.charCodeAt(0) + (currentUser.username.charCodeAt(1)||0)) % colors.length];

            let avatar = document.createElement('div');
            avatar.id = "initials-avatar";
            avatar.style.width = "80px";
            avatar.style.height = "80px";
            avatar.style.borderRadius = "50%";
            avatar.style.background = color;
            avatar.style.display = "flex";
            avatar.style.alignItems = "center";
            avatar.style.justifyContent = "center";
            avatar.style.margin = "20px auto 10px auto";
            avatar.style.fontSize = "32px";
            avatar.style.color = "#fff";
            avatar.style.fontWeight = "bold";
            avatar.style.userSelect = "none";
            avatar.textContent = initials;

            // Ø²Ø± Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©
            let addImgBtn = document.createElement('div');
            addImgBtn.id = "add-img-btn";
            addImgBtn.title = "Ø§Ø¶ØºØ· Ù„Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©";
            addImgBtn.style.width = "32px";
            addImgBtn.style.height = "32px";
            addImgBtn.style.borderRadius = "50%";
            addImgBtn.style.background = "#fff";
            addImgBtn.style.display = "flex";
            addImgBtn.style.alignItems = "center";
            addImgBtn.style.justifyContent = "center";
            addImgBtn.style.position = "relative";
            addImgBtn.style.left = "50%";
            addImgBtn.style.transform = "translateX(-50%)";
            addImgBtn.style.marginTop = "-30px";
            addImgBtn.style.marginBottom = "10px";
            addImgBtn.style.boxShadow = "0 2px 8px #0002";
            addImgBtn.style.cursor = "pointer";
            addImgBtn.style.fontSize = "22px";
            addImgBtn.style.color = "#2196f3";
            addImgBtn.innerHTML = "&#43;";

            addImgBtn.onclick = function () {
                let fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = 'image/*';
                fileInput.style.display = 'none';
                document.body.appendChild(fileInput);
                fileInput.onchange = function () {
                    const file = fileInput.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (event) {
                            img.src = event.target.result;
                            img.style.display = 'block';
                            img.style.borderRadius = "50%"; // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨
                            img.style.objectFit = "cover";  // Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø§Ù„ØºØµØ¨
                            avatar.remove();
                            addImgBtn.remove();
                            currentUser.image = event.target.result;
                            let users = JSON.parse(localStorage.getItem('users') || '[]');
                            let idx = users.findIndex(u => u.username === currentUser.username);
                            if (idx !== -1) {
                                users[idx].image = event.target.result;
                                localStorage.setItem('users', JSON.stringify(users));
                            }
                            localStorage.setItem('currentUser', JSON.stringify(currentUser));
                        };
                        reader.readAsDataURL(file);
                    }
                    fileInput.remove();
                };
                fileInput.click();
            };

            // Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ÙˆØ²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø¨Ù„ Ù…ÙƒØ§Ù† Ø§Ù„ØµÙˆØ±Ø©
            img.parentNode.insertBefore(avatar, img);
            img.parentNode.insertBefore(addImgBtn, img);
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆÙŠÙ†Ø² Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø§Ø¯
        const personsInput = document.getElementById('persons');
        const coinsNeededSpan = document.getElementById('coins-needed');
        personsInput.addEventListener('input', function() {
            let n = parseInt(personsInput.value) || 1;
            coinsNeededSpan.textContent = "(" + (n * 10) + " ÙƒÙˆÙŠÙ†Ø²)";
        });

        function subscribeTrip() {
            let n = parseInt(personsInput.value) || 1;
            let needed = n * 10;
            let user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (!user) {
                alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
                window.location.href = "index.html";
                return;
            }
            if ((user.coins || 0) < needed) {
                alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ. ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ " + needed + " ÙƒÙˆÙŠÙ†Ø². ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙƒÙˆÙŠÙ†Ø².");
                return;
            }
            user.coins -= needed;
            localStorage.setItem('currentUser', JSON.stringify(user));
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙÙŠ users Ø£ÙŠØ¶Ø§Ù‹
            let users = JSON.parse(localStorage.getItem('users') || '[]');
            let idx = users.findIndex(u => u.username === user.username);
            if (idx !== -1) {
                users[idx].coins = user.coins;
                localStorage.setItem('users', JSON.stringify(users));
            }
            alert("ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ Ù„Ø¹Ø¯Ø¯ " + n + " Ø£ÙØ±Ø§Ø¯!\nØ±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: " + user.coins + " ÙƒÙˆÙŠÙ†Ø²");
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ©
        function updateCoinsCounter() {
            const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            document.getElementById('coins-value').textContent = user && user.coins ? user.coins : 0;
        }
        updateCoinsCounter();

        // Ø¹Ù†Ø¯ Ø´Ø±Ø§Ø¡ Ø£Ùˆ Ø®ØµÙ… ÙƒÙˆÙŠÙ†Ø² Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø§Ø³ØªØ¯Ø¹ÙŠ updateCoinsCounter()
        // Ù…Ø«Ø§Ù„: Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©
        function subscribeTrip() {
            let n = parseInt(personsInput.value) || 1;
            let needed = n * 10;
            let user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (!user) {
                alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
                window.location.href = "index.html";
                return;
            } 
            if ((user.coins || 0) < needed) {
                alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ. ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ " + needed + " ÙƒÙˆÙŠÙ†Ø². ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙƒÙˆÙŠÙ†Ø².");
                return;
            }
            user.coins -= needed;
            localStorage.setItem('currentUser', JSON.stringify(user));
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙÙŠ users Ø£ÙŠØ¶Ø§Ù‹
            let users = JSON.parse(localStorage.getItem('users') || '[]');
            let idx = users.findIndex(u => u.username === user.username);
            if (idx !== -1) {
                users[idx].coins = user.coins;
                localStorage.setItem('users', JSON.stringify(users));
            }
            alert("ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ Ù„Ø¹Ø¯Ø¯ " + n + " Ø£ÙØ±Ø§Ø¯!\nØ±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: " + user.coins + " ÙƒÙˆÙŠÙ†Ø²");
            updateCoinsCounter();
        }

        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø¹Ù…Ù„ÙŠØ§Øª Ø´Ø±Ø§Ø¡ ÙƒÙˆÙŠÙ†Ø² Ù…Ù† ØµÙØ­Ø© Ø£Ø®Ø±Ù‰ØŒ Ø§Ø³ØªØ¯Ø¹ÙŠ updateCoinsCounter() Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
        window.addEventListener('focus', updateCoinsCounter);

        function showBookingDetails() {
            alert(
                "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²:\n\n" +
                "1- Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙ…ØªÙ„Ùƒ ÙƒÙˆÙŠÙ†Ø² ÙƒØ§ÙÙŠØ© (ÙƒÙ„ ÙØ±Ø¯ ÙŠØ­ØªØ§Ø¬ 10 ÙƒÙˆÙŠÙ†Ø²).\n" +
                "2- ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø£Ùˆ Ø²Ø± ğŸª™.\n" +
                "3- Ø¹Ù†Ø¯ Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒÙˆÙŠÙ†Ø²ØŒ Ø³ÙŠØªÙ… Ø®ØµÙ… Ø«Ù…Ù†Ù‡Ø§ Ù…Ù† Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø¨Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø¨Ù†ÙƒÙŠØ©.\n" +
                "4- Ø¨Ø¹Ø¯ Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒÙˆÙŠÙ†Ø²ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.\n" +
                "5- Ø³Ø¹Ø± Ø§Ù„ÙƒÙˆÙŠÙ† Ø§Ù„ÙˆØ§Ø­Ø¯: 50 Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ.\n" +
                "6- Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØŒ Ø³ÙŠØªÙ… Ø®ØµÙ… Ø§Ù„ÙƒÙˆÙŠÙ†Ø² Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø±ØµÙŠØ¯Ùƒ."
            );
        }

        // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¯Ø§Ù„Ø© showGallery Ø¨Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:
        function showGallery() {
            // ØµÙˆØ± Ø´ÙˆØ§Ø·Ø¦ Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­ (Unsplash/Free)
            const images = [
                "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80"
            ];
            let html = `<div style="background:#fffbe7;padding:18px 12px;border-radius:18px;box-shadow:0 2px 12px #0003;max-width:95vw;max-height:90vh;overflow:auto;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5000;">
                <div style="font-weight:bold;color:#2196f3;font-size:1.2em;margin-bottom:10px;text-align:center;">Ù…Ø¹Ø±Ø¶ ØµÙˆØ± Ø´ÙˆØ§Ø·Ø¦ Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­</div>
                <div style="display:flex;flex-wrap:wrap;gap:18px;justify-content:center;">`;
            for (let img of images) {
                html += `
                <div style="display:flex;flex-direction:column;align-items:center;">
                    <img src="${img}" style="width:180px;height:120px;object-fit:cover;border-radius:12px;box-shadow:0 2px 8px #0002;">
                    <a href="${img}" download style="margin-top:6px;text-decoration:none;display:flex;align-items:center;gap:4px;color:#2196f3;font-weight:bold;font-size:1em;">
                        <span style="font-size:1.3em;">&#8681;</span> ØªÙ†Ø²ÙŠÙ„
                    </a>
                </div>`;
            }
            html += `</div>
                <button onclick="this.parentNode.parentNode.remove()" style="margin:18px auto 0 auto;display:block;background:#eee;color:#2196f3;border:none;border-radius:18px;padding:8px 32px;font-size:1.1em;cursor:pointer;box-shadow:0 2px 8px #0001;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>`;
            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù…Ø¹Ø±Ø¶ Ø³Ø§Ø¨Ù‚
            let old = document.getElementById('gallery-modal');
            if (old) old.remove();
            let modal = document.createElement('div');
            modal.id = 'gallery-modal';
            modal.style = "position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0007;z-index:4999;";
            modal.onclick = function(e){ if(e.target===modal) modal.remove(); };
            modal.innerHTML = html;
            document.body.appendChild(modal);
        }
        document.addEventListener('keydown', function(e) {
            // Ø³Ù‡Ù… Ù„Ù„Ø£Ø³ÙÙ„
            if (e.key === "ArrowDown") {
                window.scrollBy({ top: 80, left: 0, behavior: 'smooth' });
            }
            // Ø³Ù‡Ù… Ù„Ù„Ø£Ø¹Ù„Ù‰
            if (e.key === "ArrowUp") {
                window.scrollBy({ top: -80, left: 0, behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>